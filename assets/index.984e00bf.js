var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,r)=>{for(var o in r||(r={}))a.call(r,o)&&l(e,o,r[o]);if(t)for(var o of t(r))n.call(r,o)&&l(e,o,r[o]);return e};import{R as o,D as c,a as s,N as i,L as m,S as u,F as d,E as p,b as E,c as g,d as f,e as b,u as h,f as v,g as y,h as x,i as S,j as N,k as C,l as k,M as w,T as F,m as $,n as I,P as L,A as P,o as A,p as T,q as D,r as z,B as R,s as U,t as j,v as q,w as M,x as O}from"./vendor.9fc73485.js";const B=o.createContext({claims:[],actualizar:()=>{console.log("ok")}}),V=e=>{localStorage.setItem("token",e.token),localStorage.setItem("token-expiracion",e.expiracion.toString())},G=()=>{const e=localStorage.getItem("token");if(!e)return[];const t=localStorage.getItem("token-expiracion");if(new Date(t)<=new Date)return _(),[];const a=JSON.parse(window.atob(e.split(".")[1])),n=[];for(const l in a)n.push({nombre:l,valor:a[l]});return n},_=()=>{localStorage.removeItem("token"),localStorage.removeItem("token-expiracion")};function J(e){const[t,a]=s.exports.useState(!1),{claims:n}=s.exports.useContext(B);return s.exports.useEffect((()=>{if(e.role){const t=n.findIndex((t=>"role"===t.nombre&&t.valor===e.role));a(t>-1)}else a(n.length>0)}),[n,e.role]),o.createElement(o.Fragment,null,t?e.autorizado:e.noAutorizado)}function H(e){return o.createElement("button",{className:e.className,disabled:e.disabled,type:e.type,onClick:e.onClick,style:e.style},e.children)}function X(){const e="active",{actualizar:t,claims:a}=s.exports.useContext(B);return o.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},o.createElement("div",{className:"container-fluid"},o.createElement(i,{className:"navbar-brand",activeClassName:e,to:"/"},"React Películas"),o.createElement("div",{className:"collapse navbar-collapse",style:{display:"flex",justifyContent:"space-between"}},o.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/peliculas/filtrar"},"Filtrar Películas")),o.createElement(J,{role:"admin",autorizado:o.createElement(o.Fragment,null,o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/generos"},"Géneros")),o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/actores"},"Actores")),o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/cines"},"Cines")),o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/peliculas/crear"},"Crear Películas")),o.createElement("li",{className:"nav-item"},o.createElement(i,{className:"nav-link",activeClassName:e,to:"/usuarios"},"Usuarios")))})),o.createElement("div",{className:"d-flex"},o.createElement(J,{autorizado:o.createElement(o.Fragment,null,o.createElement("span",{className:"nav-link"},"Hola, ",null==(n=a.filter((e=>"email"===e.nombre))[0])?void 0:n.valor),o.createElement(H,{onClick:()=>{_(),t([])},className:"nav-link btn btn-link"},"Log out")),noAutorizado:o.createElement(o.Fragment,null,o.createElement(m,{to:"/registro",className:"nav-link btn-link"},"Registro"),o.createElement(m,{to:"/login",className:"nav-link btn-link"},"Login"))})))));var n}H.defaultProps={type:"button",disabled:!1,className:"btn btn-primary",style:null};function K(e,t="¿Desea borrar el registro?",a="Borrar"){u.fire({title:t,confirmButtonText:a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((t=>{t.isConfirmed&&e()}))}const Y="https://peliculasapi20220424165242.azurewebsites.net/api",Q=`${Y}/generos`,W=`${Y}/actores`,Z=`${Y}/cines`,ee=`${Y}/peliculas`,te=`${Y}/cuentas`,ae=`${Y}/rating`;function ne(){return o.createElement("img",{src:"https://i.giphy.com/3oEjI6SIIHBdRxXI40.gif",alt:"loading gif"})}function le(e){return e.listado?0===e.listado.length?e.listadoVacioUI?e.listadoVacioUI:o.createElement(o.Fragment,null,"No hay elementos para mostrar."):e.children:e.cargandoUI?e.cargandoUI:o.createElement(ne,null)}function re(e){const[t,a]=s.exports.useState([]);function n(e){return e.activo?"active pointer":e.habilitado?"pointer":"disabled"}return s.exports.useEffect((()=>{const t=1!==e.paginaActual,n=e.paginaActual-1,l=[];l.push({texto:"Anterior",habilitado:t,pagina:n,activo:!1});for(let a=1;a<=e.cantidadTotalDePaginas;a++)a>=e.paginaActual-e.radio&&a<=e.paginaActual+e.radio&&l.push({texto:`${a}`,activo:e.paginaActual===a,habilitado:!0,pagina:a});const r=e.paginaActual!==e.cantidadTotalDePaginas&&e.cantidadTotalDePaginas>0,o=e.paginaActual+1;l.push({texto:"Siguiente",pagina:o,habilitado:r,activo:!1}),a(l)}),[e.paginaActual,e.cantidadTotalDePaginas,e.radio]),o.createElement("nav",null,o.createElement("ul",{className:"pagination justify-content-center"},t.map((t=>o.createElement("li",{key:t.texto,onClick:()=>function(t){t.pagina!==e.paginaActual&&t.habilitado&&e.onChange(t.pagina)}(t),className:`page-item cursor ${n(t)}`},o.createElement("span",{className:"page-link"},t.texto))))))}function oe(e){const[t,a]=s.exports.useState(),[n,l]=s.exports.useState(0),[r,i]=s.exports.useState(10),[u,d]=s.exports.useState(1);function p(){c.get(e.url,{params:{pagina:u,recordsPorPagina:r}}).then((e=>{const t=parseInt(e.headers.cantidadtotalregistros,10);l(Math.ceil(t/r)),a(e.data)}))}s.exports.useEffect((()=>{p()}),[u,r]);return o.createElement(o.Fragment,null,o.createElement("h3",null,e.titulo),e.urlCrear?o.createElement(m,{className:"btn btn-primary",to:e.urlCrear},"Crear ",e.nombreEntidad):null,o.createElement("div",{className:"form-group",style:{width:"150px"}},o.createElement("label",null,"Registros por página:"),o.createElement("select",{className:"form-control",defaultValue:10,onChange:e=>{d(1),i(parseInt(e.currentTarget.value,10))}},o.createElement("option",{value:5},"5"),o.createElement("option",{value:10},"10"),o.createElement("option",{value:25},"25"),o.createElement("option",{value:50},"50"))),o.createElement(re,{cantidadTotalDePaginas:n,paginaActual:u,onChange:e=>d(e)}),o.createElement(le,{listado:t},o.createElement("table",{className:"table table-striped"},e.children(t,((t,a)=>o.createElement(o.Fragment,null,o.createElement(m,{className:"btn btn-success",to:t},"Editar"),o.createElement(H,{onClick:()=>K((()=>async function(t){try{await c.delete(`${e.url}/${t}`),p()}catch(a){console.log(a.response.data)}}(a))),className:"btn btn-danger"},"Borrar")))))))}function ce(e){return o.createElement(o.Fragment,null,e.errores?o.createElement("ul",{style:{color:"red"}},e.errores.map(((e,t)=>o.createElement("li",{key:t},e)))):null)}function se(e){return o.createElement("div",{className:"text-danger"},e.mensaje)}function ie(e){return o.createElement("div",{className:"form-group"},e.label?o.createElement("label",{htmlFor:e.campo},e.label):null,o.createElement(d,{type:e.type,name:e.campo,className:"form-control",placeholder:e.placeholder}),o.createElement(p,{name:e.campo},(e=>o.createElement(se,{mensaje:e}))))}function me(e){return o.createElement(E,{initialValues:e.modelo,onSubmit:e.onSubmit,validationSchema:g({email:f().required("Este campo es requerido").email("Debe colocar un email válido"),password:f().required("Este campo es requerido")})},(e=>o.createElement(b,null,o.createElement(ie,{label:"Email",campo:"email"}),o.createElement(ie,{label:"Password",campo:"password",type:"password"}),o.createElement(H,{disabled:e.isSubmitting,type:"submit"},"Enviar"),o.createElement(m,{className:"btn btn-secondary",to:"/"},"Cancelar"))))}re.defaultProps={radio:3},ie.defaultProps={type:"text"};const ue=e=>{const t=new FormData;return t.append("nombre",e.nombre),e.biografia&&t.append("biografia",e.biografia),e.fechaNacimiento&&t.append("fechaNacimiento",pe(e.fechaNacimiento)),e.foto&&t.append("foto",e.foto),t};function de(e){const t=new FormData;return t.append("titulo",e.titulo),e.resumen&&t.append("resumen",e.resumen),t.append("trailer",e.trailer),t.append("enCines",String(e.enCines)),e.fechaLanzamiento&&t.append("fechaLanzamiento",pe(e.fechaLanzamiento)),e.poster&&t.append("poster",e.poster),t.append("generosIds",JSON.stringify(e.generosIds)),t.append("cinesIds",JSON.stringify(e.cinesIds)),t.append("actores",JSON.stringify(e.actores)),t}const pe=e=>{e=new Date(e);const t=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),[{value:a},,{value:n},,{value:l}]=t.formatToParts(e);return`${l}-${a}-${n}`};function Ee(e){var t,a;const{values:n,validateForm:l,touched:r,errors:c}=v();return o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:e.campo},e.label),o.createElement("input",{type:"date",className:"form-control",id:e.campo,name:e.campo,defaultValue:null==(t=n[e.campo])?void 0:t.toLocaleDateString("en-CA"),onChange:t=>{const a=new Date(t.currentTarget.value+"T00:00:00");n[e.campo]=a,l()}}),r[e.campo]&&c[e.campo]?o.createElement(se,{mensaje:null==(a=c[e.campo])?void 0:a.toString()}):null)}function ge(e){const t={marginTop:"10px"},a={width:"450px"},[n,l]=s.exports.useState(""),[r,c]=s.exports.useState(e.imagenURL),{values:i}=v(),m=e=>new Promise(((t,a)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>a(e)}));return o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:""},e.label),o.createElement("div",null,o.createElement("input",{type:"file",accept:".jg,.jpeg,.png",onChange:t=>{if(t.currentTarget.files){const a=t.currentTarget.files[0];m(a).then((e=>l(e))).catch((e=>console.error(e))),i[e.campo]=a,c("")}}})),n?o.createElement("div",{style:t},o.createElement("div",null,o.createElement("img",{style:a,src:n,alt:"Imagen seleccionada"}))):null,r?o.createElement("div",{style:t},o.createElement("div",null,o.createElement("img",{style:a,src:r,alt:"Imagen seleccionada"}))):null)}ge.defaultProps={imagenURL:""};function fe(e){const{values:t}=v();return o.createElement("div",{className:"form-group form-markdown"},o.createElement("div",null,o.createElement("label",null,e.label),o.createElement("div",null,o.createElement(d,{name:e.campo,as:"textarea",className:"form-textarea"}))),o.createElement("div",null,o.createElement("label",null,e.label," (preview):"),o.createElement("div",{className:"markdown-container"},o.createElement(y,null,t[e.campo]))))}function be(e){return o.createElement(E,{initialValues:e.modelo,onSubmit:e.onSubmit,validationSchema:g({nombre:f().required("Este campo es requerido").primeraLetraMayuscula(),fechaNacimiento:x().nullable().required("Este campo es requerido")})},(t=>o.createElement(b,null,o.createElement(ie,{campo:"nombre",label:"Nombre"}),o.createElement(Ee,{label:"Fecha Nacimiento",campo:"fechaNacimiento"}),o.createElement(ge,{campo:"foto",label:"Foto",imagenURL:e.modelo.fotoURL}),o.createElement(fe,{campo:"biografia",label:"Biografía"}),o.createElement(H,{disabled:t.isSubmitting,type:"submit"},"Salvar"),o.createElement(m,{className:"btn btn-secondary",to:"/actores"},"Cancelar"))))}function he(e){const{id:t}=S(),[a,n]=s.exports.useState([]),[l,r]=s.exports.useState(),i=h();return s.exports.useEffect((()=>{c.get(`${e.url}/${t}`).then((t=>{r(e.transformar(t.data))}))}),[]),o.createElement(o.Fragment,null,o.createElement("h3",null,"Editar ",e.nombreEntidad),o.createElement(ce,{errores:a}),l?e.children(l,(async function(a){try{if(e.transformarFormData){const n=e.transformarFormData(a);await c({url:`${e.url}/${t}`,method:"PUT",data:n,headers:{"Content-Type":"multipart/form-data"}})}else await c.put(`${e.url}/${t}`,a);i.push(e.urlIndice)}catch(l){n(l.response.data)}})):o.createElement(ne,null))}he.defaultProps={transformar:e=>e};const ve=N.icon({iconUrl:C,shadowUrl:k,iconAnchor:[16,37]});function ye(e){const[t,a]=s.exports.useState(e.coordenadas);return o.createElement(w,{center:[e.centerLat,e.centerLng],zoom:14,style:{height:e.height}},o.createElement(F,{attribution:"React Películas",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.soloLectura?null:o.createElement(xe,{setPunto:t=>{a([t]),e.manejarClickMapa(t)}}),t.map(((e,t)=>o.createElement(Se,r({key:t},e)))))}function xe(e){return $("click",(t=>{e.setPunto({lat:t.latlng.lat,lng:t.latlng.lng})})),null}function Se(e){return o.createElement(I,{position:[e.lat,e.lng]},e.nombre?o.createElement(L,null,e.nombre):null)}function Ne(e){const{values:t}=v();return o.createElement(ye,{centerLat:e.centerLat,centerLng:e.centerLng,coordenadas:e.coordenadas,manejarClickMapa:function(a){t[e.campoLat]=a.lat,t[e.campoLng]=a.lng}})}function Ce(e){function t(){if(e.modelo.latitud&&e.modelo.longitud){return[{lat:e.modelo.latitud,lng:e.modelo.longitud}]}}return o.createElement(E,{initialValues:e.modelo,onSubmit:e.onSubmit,validationSchema:g({nombre:f().required("Este campo es requerido").primeraLetraMayuscula()})},(a=>o.createElement(b,null,o.createElement(ie,{label:"Nombre",campo:"nombre"}),o.createElement("div",{style:{marginBottom:"1rem"}},o.createElement(Ne,{campoLat:"latitud",campoLng:"longitud",centerLat:e.modelo.latitud,centerLng:e.modelo.longitud,coordenadas:t()})),o.createElement(H,{disabled:a.isSubmitting,type:"submit"},"Salvar"),o.createElement(m,{className:"btn btn-secondary",to:"/cines"},"Cancelar"))))}function ke(e){return o.createElement(E,{initialValues:e.modelo,onSubmit:e.onSubmit,validationSchema:g({nombre:f().required("Este campo es requerido").max(50,"La longitud máxima es de 50 caracteres").primeraLetraMayuscula()})},(e=>o.createElement(b,null,o.createElement(ie,{campo:"nombre",label:"Nombre"}),o.createElement(H,{disabled:e.isSubmitting,type:"submit"},"Salvar"),o.createElement(m,{className:"btn btn-secondary",to:"/generos"},"Cancelar"))))}function we(e){const[t,a]=s.exports.useState(!1),[n,l]=s.exports.useState([]),[r,i]=s.exports.useState(void 0);return o.createElement(o.Fragment,null,o.createElement("label",null,"Actores"),o.createElement(P,{id:"typeahead",onChange:t=>{-1===e.actores.findIndex((e=>e.id===t[0].id))&&e.onAdd([...e.actores,t[0]])},options:n,labelKey:e=>e.nombre,filterBy:()=>!0,isLoading:t,onSearch:e=>{a(!0),c.get(`${W}/buscarPorNombre/${e}`).then((e=>{l(e.data),a(!1)}))},placeholder:"Escriba el nombre del actor...",minLength:2,flip:!0,selected:[],renderMenuItemChildren:e=>o.createElement(o.Fragment,null,o.createElement("img",{alt:"imagen actor",src:e.foto,style:{width:"64px",marginRight:"10px",height:"64px"}}),o.createElement("span",null,e.nombre))}),o.createElement("ul",{className:"list-group"},e.actores.map((t=>o.createElement("li",{draggable:!0,onDragStart:()=>function(e){i(e)}(t),onDragOver:()=>function(t){if(r&&t.id!==r.id){const a=e.actores.findIndex((e=>e.id===r.id)),n=e.actores.findIndex((e=>e.id===t.id)),l=[...e.actores];l[n]=r,l[a]=t,e.onAdd(l)}}(t),className:"list-group-item list-group-item-action",key:t.id},e.listadoUI(t),o.createElement("span",{className:"badge badge-primary bagde-pill pointer",style:{marginLeft:"0.5rem"},onClick:()=>e.onRemove(t)},"X"))))))}function Fe(e){return o.createElement("div",{className:"form-group form-check"},o.createElement(d,{className:"form-check-input",id:e.campo,name:e.campo,type:"checkbox"}),o.createElement("label",{htmlFor:e.campo},e.label))}N.Marker.prototype.options.icon=ve,ye.defaultProps={height:"500px",centerLat:-12.003689,centerLng:-77.110048,soloLectura:!1,manejarClickMapa:void 0},Ne.defaultProps={coordenadas:[]};function $e(e){return o.createElement("div",{className:"selector-multiple"},o.createElement("ul",null,e.noSeleccionados.map((t=>o.createElement("li",{key:t.llave,onClick:()=>{!function(t){const a=[...e.seleccionados,t],n=e.noSeleccionados.filter((e=>e!==t));e.onChange(a,n)}(t)}},t.valor)))),o.createElement("div",{className:"selector-multiple-botones"},o.createElement("button",{type:"button",onClick:function(){const t=[...e.seleccionados,...e.noSeleccionados];e.onChange(t,[])}},">>"),o.createElement("button",{type:"button",onClick:function(){const t=[...e.noSeleccionados,...e.seleccionados];e.onChange([],t)}},"<<")),o.createElement("ul",null,e.seleccionados.map((t=>o.createElement("li",{key:t.llave,onClick:()=>{!function(t){const a=e.seleccionados.filter((e=>e!==t)),n=[...e.noSeleccionados,t];e.onChange(a,n)}(t)}},t.valor)))))}function Ie(e){const[t,a]=s.exports.useState(h(e.generosSeleccionados)),[n,l]=s.exports.useState(h(e.generosNoSeleccionados)),[r,c]=s.exports.useState(h(e.cinesSeleccionados)),[i,u]=s.exports.useState(h(e.cinesNoSeleccionados)),[d,p]=s.exports.useState(e.actoresSeleccionados);function h(e){return e.map((e=>({llave:e.id,valor:e.nombre})))}return o.createElement(E,{initialValues:e.modelo,onSubmit:(a,n)=>{a.generosIds=t.map((e=>e.llave)),a.cinesIds=r.map((e=>e.llave)),a.actores=d,e.onSubmit(a,n)},validationSchema:g({titulo:f().required("Este campo es requerido").primeraLetraMayuscula()})},(s=>o.createElement(b,null,o.createElement(ie,{label:"Título",campo:"titulo"}),o.createElement(Fe,{label:"En cines",campo:"enCines"}),o.createElement(ie,{label:"Trailer",campo:"trailer"}),o.createElement(Ee,{campo:"fechaLanzamiento",label:"Fecha lanzamiento"}),o.createElement(ge,{campo:"poster",label:"Poster",imagenURL:e.modelo.posterURL}),o.createElement(fe,{campo:"resumen",label:"Resumen"}),o.createElement("div",{className:"form-group"},o.createElement("label",null,"Géneros:"),o.createElement($e,{seleccionados:t,noSeleccionados:n,onChange:(e,t)=>{a(e),l(t)}})),o.createElement("div",{className:"form-group"},o.createElement("label",null,"Cines:"),o.createElement($e,{seleccionados:r,noSeleccionados:i,onChange:(e,t)=>{c(e),u(t)}})),o.createElement("div",{className:"form-group"},o.createElement(we,{onAdd:e=>{p(e)},onRemove:e=>{const t=d.filter((t=>t!==e));p(t)},actores:d,listadoUI:e=>{var t;return o.createElement(o.Fragment,null,e.nombre," / ",o.createElement("input",{placeholder:"Personaje",type:"text",value:null!=(t=e.personaje)?t:"",onChange:t=>{const a=d.findIndex((t=>t.id===e.id)),n=[...d];n[a].personaje=t.currentTarget.value,p(n)}}))}})),o.createElement(H,{disabled:s.isSubmitting,type:"submit"},"Enviar"),o.createElement(m,{className:"btn btn-secondary",to:"/"},"Cancelar"))))}function Le(e){const{claims:t}=s.exports.useContext(B),[a,n]=s.exports.useState([]),[l,r]=s.exports.useState(e.valorSeleccionado);s.exports.useEffect((()=>{n(Array(e.maximoValor).fill(0))}),[e.maximoValor]);return o.createElement(o.Fragment,null,a.map(((a,n)=>o.createElement(A,{icon:"star",key:n,onMouseOver:()=>{r(n+1)},onClick:()=>{return a=n+1,void(0!=t.length?(r(a),e.onChange(a)):u.fire({title:"Error",text:"Debes loguearte para votar",icon:"error"}));var a},className:`fa-lg pointer ${l>=n+1?"checked":null}`}))))}var Pe="_div_1spmx_1";const Ae=o.createContext((()=>{console.log("ok")}));var Te="_div_xwer7_1";function De(e){const t=()=>`/pelicula/${e.pelicula.id}`,a=s.exports.useContext(Ae);return o.createElement("div",{className:Te},o.createElement(m,{to:t()},o.createElement("img",{src:e.pelicula.poster,alt:"Poster"})),o.createElement("p",null,o.createElement(m,{to:t()},e.pelicula.titulo)),o.createElement(J,{role:"admin",autorizado:o.createElement("div",null,o.createElement(m,{style:{marginRight:"1rem"},className:"btn btn-info",to:`/peliculas/editar/${e.pelicula.id}`},"Editar"),o.createElement(H,{onClick:()=>K((()=>(async()=>{c.delete(`${ee}/${e.pelicula.id}`).then((()=>{a()}))})())),className:"btn btn-danger"},"Borrar"))}))}function ze(e){var t;return o.createElement(le,{listado:e.peliculas},o.createElement("div",{className:Pe},null==(t=e.peliculas)?void 0:t.map((e=>o.createElement(De,{pelicula:e,key:e.id})))))}const Re=[{path:"/generos/crear",componente:function(){const e=h(),[t,a]=s.exports.useState([]);return o.createElement(o.Fragment,null,o.createElement("h3",null,"Crear Género"),o.createElement(ce,{errores:t}),o.createElement(ke,{modelo:{nombre:""},onSubmit:async t=>{await async function(t){try{await c.post(Q,t),e.push("/generos")}catch(n){a(n.response.data)}}(t)}}))},esAdmin:!0},{path:"/generos/editar/:id(\\d+)",componente:function(){return o.createElement(o.Fragment,null,o.createElement(he,{url:Q,urlIndice:"/generos",nombreEntidad:"Géneros"},((e,t)=>o.createElement(ke,{modelo:e,onSubmit:async e=>{await t(e)}}))))},esAdmin:!0},{path:"/generos",componente:function(){return o.createElement(o.Fragment,null,o.createElement(oe,{url:Q,urlCrear:"generos/crear",titulo:"Géneros",nombreEntidad:"Género"},((e,t)=>o.createElement(o.Fragment,null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null),o.createElement("th",null,"Nombre"))),o.createElement("tbody",null,null==e?void 0:e.map((e=>o.createElement("tr",{key:e.id},o.createElement("td",null,t(`generos/editar/${e.id}`,e.id)),o.createElement("td",null,e.nombre)))))))))},exact:!0,esAdmin:!0},{path:"/actores/crear",componente:function(){const e=h(),[t,a]=s.exports.useState([]);return o.createElement(o.Fragment,null,o.createElement("h3",null,"Crear Actores"),o.createElement(ce,{errores:t}),o.createElement(be,{modelo:{nombre:"",fechaNacimiento:void 0},onSubmit:async t=>await async function(t){try{const a=ue(t);await c({url:W,method:"POST",data:a,headers:{"Content-Type":"multipart/form-data"}}),e.push("/actores")}catch(n){a(n.response.data)}}(t)}))},esAdmin:!0},{path:"/actores/editar/:id(\\d+)",componente:function(){return o.createElement(o.Fragment,null,o.createElement(he,{url:W,urlIndice:"/actores",nombreEntidad:"Actores",transformarFormData:ue,transformar:e=>({nombre:e.nombre,fotoURL:e.foto,biografia:e.biografia,fechaNacimiento:new Date(e.fechaNacimiento)})},((e,t)=>o.createElement(be,{modelo:e,onSubmit:async e=>await t(e)}))))},esAdmin:!0},{path:"/actores",componente:function(){return o.createElement(o.Fragment,null,o.createElement("h3",null,"Indice Actores"),o.createElement(oe,{url:W,urlCrear:"actores/crear",titulo:"Actores",nombreEntidad:"Actor"},((e,t)=>o.createElement(o.Fragment,null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null),o.createElement("th",null,"Nombre"))),o.createElement("tbody",null,null==e?void 0:e.map((e=>o.createElement("tr",{key:e.id},o.createElement("td",null,t(`actores/editar/${e.id}`,e.id)),o.createElement("td",null,e.nombre)))))))))},exact:!0,esAdmin:!0},{path:"/cines/crear",componente:function(){const e=h(),[t,a]=s.exports.useState([]);return o.createElement(o.Fragment,null,o.createElement("h3",null,"Crear Cine"),o.createElement(ce,{errores:t}),o.createElement(Ce,{modelo:{nombre:""},onSubmit:async t=>await async function(t){try{await c.post(Z,t),e.push("/cines")}catch(n){a(n.response.data)}}(t)}))},esAdmin:!0},{path:"/cines/editar/:id(\\d+)",componente:function(){return o.createElement(he,{url:Z,urlIndice:"/cines",nombreEntidad:"Cines"},((e,t)=>o.createElement(Ce,{modelo:e,onSubmit:async e=>{await t(e)}})))},esAdmin:!0},{path:"/cines",componente:function(){return o.createElement(o.Fragment,null,o.createElement(oe,{url:Z,urlCrear:"cines/crear",titulo:"Cines",nombreEntidad:"Cine"},((e,t)=>o.createElement(o.Fragment,null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null),o.createElement("th",null,"Nombre"))),o.createElement("tbody",null,null==e?void 0:e.map((e=>o.createElement("tr",{key:e.id},o.createElement("td",null,t(`cines/editar/${e.id}`,e.id)),o.createElement("td",null,e.nombre)))))))))},exact:!0,esAdmin:!0},{path:"/pelicula/:id(\\d+)",componente:function(){var e,t;const{id:a}=S(),[n,l]=s.exports.useState();return s.exports.useEffect((()=>{c.get(`${ee}/${a}`).then((e=>{e.data.fechaLanzamiento=new Date(e.data.fechaLanzamiento),l(e.data)}))}),[a]),n?o.createElement("div",{style:{display:"flex"}},o.createElement("div",null,o.createElement("h2",null,n.titulo," (",n.fechaLanzamiento.getFullYear(),")"),null==(e=n.generos)?void 0:e.map((e=>o.createElement(m,{key:e.id,style:{marginRight:"5px"},className:"btn btn-primary btn-sm rounded-pill",to:`/peliculas/filtrar?generoId=${e.id}`},e.nombre))),"| ",n.fechaLanzamiento.toDateString(),"| Tu voto ",o.createElement(Le,{maximoValor:5,valorSeleccionado:0,onChange:async e=>{await c.post(ae,{puntuacion:e,peliculaId:a}),u.fire({icon:"success",title:"Voto recibido"})}}),o.createElement("div",{style:{display:"flex",marginTop:"1rem"}},o.createElement("span",{style:{display:"inline-block",marginRight:"1rem"}},o.createElement("img",{src:n.poster,style:{width:"225px",height:"315px"},alt:"poster"})),n.trailer?o.createElement("div",null,o.createElement("iframe",{title:"youtube-trailer",width:"560",height:"315",src:(e=>{if(!e)return"";let t=e.split("v=")[1];const a=t.indexOf("&");return-1!==a&&(t=t.substring(0,a)),`https://www.youtube.com/embed/${t}`})(n.trailer),frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})):null),n.resumen?o.createElement("div",{style:{display:"flex",marginTop:"1re"}},o.createElement("h3",null,"Resumen"),o.createElement("div",null,o.createElement(y,null,n.resumen))):null,n.actores&&n.actores.length>0?o.createElement("div",{style:{marginTop:"1rem"}},o.createElement("h3",null,"Actores"),o.createElement("div",{style:{display:"flex",flexDirection:"column"}},null==(t=n.actores)?void 0:t.map((e=>o.createElement("div",{key:e.id,style:{marginBottom:"2px"}},o.createElement("img",{alt:"foto",src:e.foto,style:{width:"50px",verticalAlign:"middle"}}),o.createElement("span",{style:{display:"inline-block",width:"200px",marginLeft:"1rem"}},e.nombre),o.createElement("span",{style:{display:"inline-block",width:"45px"}},"..."),o.createElement("span",null,e.personaje)))))):null,n.cines&&n.cines.length>0?o.createElement("div",null,o.createElement("h2",null,"Monstrándose en los siguientes cines"),o.createElement(ye,{soloLectura:!0,coordenadas:(()=>{if(null==n?void 0:n.cines){return n.cines.map((e=>({lat:e.latitud,lng:e.longitud,nombre:e.nombre})))}return[]})()})):null)):o.createElement(ne,null)}},{path:"/peliculas/crear",componente:function(){const[e,t]=s.exports.useState([]),[a,n]=s.exports.useState([]),[l,r]=s.exports.useState(!1),i=h(),[m,u]=s.exports.useState([]);return s.exports.useEffect((()=>{c.get(`${ee}/postget`).then((e=>{t(e.data.generos),n(e.data.cines),r(!0)}))}),[]),o.createElement(o.Fragment,null,o.createElement("h3",null,"Crear Película"),o.createElement(ce,{errores:m}),l?o.createElement(Ie,{actoresSeleccionados:[],cinesSeleccionados:[],cinesNoSeleccionados:a,generosSeleccionados:[],generosNoSeleccionados:e,modelo:{titulo:"",enCines:!1,trailer:""},onSubmit:async e=>async function(e){try{const t=de(e);await c({method:"post",url:ee,data:t,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{i.push(`/pelicula/${e.data}`)}))}catch(t){u(t.response.data)}}(e)}):o.createElement(ne,null))},esAdmin:!0},{path:"/peliculas/editar/:id(\\d+)",componente:function(){const[e,t]=s.exports.useState(),[a,n]=s.exports.useState(),[l,r]=s.exports.useState([]),{id:i}=S(),m=h();return s.exports.useEffect((()=>{c.get(`${ee}/PutGet/${i}`).then((e=>{const a={titulo:e.data.pelicula.titulo,enCines:e.data.pelicula.enCines,trailer:e.data.pelicula.trailer,posterURL:e.data.pelicula.poster,resumen:e.data.pelicula.resumen,fechaLanzamiento:new Date(e.data.pelicula.fechaLanzamiento)};t(a),n(e.data)}))}),[]),o.createElement(o.Fragment,null,o.createElement("h3",null,"Editar Película"),o.createElement(ce,{errores:l}),e&&a?o.createElement(Ie,{actoresSeleccionados:a.actores,cinesSeleccionados:a.cinesSeleccionados,cinesNoSeleccionados:a.cinesNoSeleccionados,generosNoSeleccionados:a.generosNoSeleccionados,generosSeleccionados:a.generosSeleccionados,modelo:e,onSubmit:async e=>await(async e=>{try{const t=de(e);await c({method:"put",url:`${ee}/${i}`,data:t,headers:{"Content-Type":"multipart/form-data"}}),m.push(`/pelicula/${i}`)}catch(t){r(t.response.data)}})(e)}):o.createElement(ne,null))},esAdmin:!0},{path:"/peliculas/filtrar",componente:function(){const e={titulo:"",generoId:0,proximosEstrenos:!1,enCines:!1,pagina:1,recordsPorPagina:10},[t,a]=s.exports.useState([]),[n,l]=s.exports.useState([]),i=h(),m=new URLSearchParams(T().search),[u,p]=s.exports.useState(0);s.exports.useEffect((()=>{c.get(`${Q}/todos`).then((e=>{a(e.data)}))}),[]),s.exports.useEffect((()=>{m.get("titulo")&&(e.titulo=m.get("titulo")),m.get("generoId")&&(e.generoId=parseInt(m.get("generoId"),10)),m.get("proximosEstrenos")&&(e.proximosEstrenos=!0),m.get("enCines")&&(e.enCines=!0),m.get("pagina")&&(e.pagina=parseInt(m.get("pagina"),10)),g(e)}),[]);const g=t=>{f(t),c.get(`${ee}/filtrar`,{params:t}).then((t=>{const a=parseInt(t.headers.cantidadtotalregistros,10);p(Math.ceil(a/e.recordsPorPagina)),l(t.data)}))},f=e=>{const t=[];e.titulo&&t.push(`titulo=${e.titulo}`),0!==e.generoId&&t.push(`generoId=${e.generoId}`),e.proximosEstrenos&&t.push(`proximosEstrenos=${e.proximosEstrenos}`),e.enCines&&t.push(`enCines=${e.enCines}`),t.push(`pagina=${e.pagina}`),i.push(`/peliculas/filtrar?${t.join("&")}`)};return o.createElement(o.Fragment,null,o.createElement("h3",null,"Filtrar Películas"),o.createElement(E,{initialValues:e,onSubmit:e=>{e.pagina=1,g(e)}},(a=>o.createElement(o.Fragment,null,o.createElement(b,null,o.createElement("div",{className:"form-inline"},o.createElement("div",{className:"form-group mb-2"},o.createElement("label",{htmlFor:"titulo",className:"sr-only"},"Título"),o.createElement("input",r({type:"text",className:"form-control",id:"titulo",placeholder:"Título de la película"},a.getFieldProps("titulo")))),o.createElement("div",{className:"form-group mx-sm-3 mb-2"},o.createElement("select",r({className:"form-control"},a.getFieldProps("generoId")),o.createElement("option",{value:"0"},"--Seleccione un género---"),t.map((e=>o.createElement("option",{key:e.id,value:e.id},e.nombre))))),o.createElement("div",{className:"form-group mx-sm-3 mb-2"},o.createElement(d,{className:"form-check-input",id:"proximosEstrenos",name:"proximosEstrenos",type:"checkbox"}),o.createElement("label",{className:"form-check-label",htmlFor:"proximosEstrenos"},"Próximos estrenos")),o.createElement("div",{className:"form-group mx-sm-3 mb-2"},o.createElement(d,{className:"form-check-input",id:"enCines",name:"enCines",type:"checkbox"}),o.createElement("label",{className:"form-check-label",htmlFor:"proximosEstrenos"},"En cines")),o.createElement(H,{className:"btn btn-primary mb-2 mx-sm-3",onClick:()=>a.submitForm()},"Filtrar"),o.createElement(H,{className:"btn btn-danger mb-2",onClick:()=>{a.setValues(e),g(e)}},"Limpiar"))),o.createElement(ze,{peliculas:n}),o.createElement(re,{cantidadTotalDePaginas:u,paginaActual:a.values.pagina,onChange:e=>{a.values.pagina=e,g(a.values)}})))))}},{path:"/registro",componente:function(){const{actualizar:e}=s.exports.useContext(B),[t,a]=s.exports.useState([]),n=h();return o.createElement(o.Fragment,null,o.createElement("h3",null,"Registro"),o.createElement(ce,{errores:t}),o.createElement(me,{modelo:{email:"",password:""},onSubmit:async t=>await(async t=>{try{const a=await c.post(`${te}/crear`,t);V(a.data),e(G()),n.push("/"),console.log(a.data)}catch(l){a(l.response.data)}})(t)}))}},{path:"/login",componente:function(){const[e,t]=s.exports.useState([]),{actualizar:a}=s.exports.useContext(B),n=h();return o.createElement(o.Fragment,null,o.createElement("h3",null,"Login"),o.createElement(ce,{errores:e}),o.createElement(me,{modelo:{email:"",password:""},onSubmit:async e=>await(async e=>{try{const t=await c.post(`${te}/login`,e);V(t.data),a(G()),n.push("/"),console.log(t.data)}catch(l){t(l.response.data)}})(e)}))}},{path:"/usuarios",componente:function(){const e=async(e,t)=>{await c.post(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}}),u.fire({title:"Éxito",text:"Operación realizada con éxito.",icon:"success"})};return o.createElement(oe,{url:`${te}/listadoUsuarios`,titulo:"Usuarios"},(t=>o.createElement(o.Fragment,null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null),o.createElement("th",null,"Nombre"))),o.createElement("tbody",null,null==t?void 0:t.map((t=>o.createElement("tr",{key:t.id},o.createElement("td",null,o.createElement(H,{onClick:()=>{K((()=>(async t=>{await e(`${te}/hacerAdmin`,t)})(t.id)),`¿Desea hacer a ${t.email} admin?`,"Realizar")}},"Hacer Admin"),o.createElement(H,{className:"btn btn-danger",style:{marginLeft:"1rem"},onClick:()=>{K((()=>(async t=>{await e(`${te}/removerAdmin`,t)})(t.id)),`¿Desea remover a ${t.email} como admin?`,"Realizar")}},"Remover Admin")),o.createElement("td",null,t.email))))))))},esAdmin:!0},{path:"/",componente:function(){const[e,t]=s.exports.useState({});s.exports.useEffect((()=>{a()}),[]);const a=async()=>{c.get(ee).then((e=>{t(e.data)}))};return o.createElement(o.Fragment,null,o.createElement(Ae.Provider,{value:()=>a()},o.createElement("h3",null,"En Cartelera"),o.createElement(ze,{peliculas:e.enCines}),o.createElement("h3",null,"Próximos Estrenos"),o.createElement(ze,{peliculas:e.proximosEstrenos})))},exact:!0},{path:"*",componente:function(){return o.createElement(D,{to:{pathname:"/"}})},exact:!0}];function Ue(){const[e,t]=s.exports.useState([]);s.exports.useEffect((()=>{t(G())}),[]);return o.createElement(o.Fragment,null,o.createElement(R,null,o.createElement(B.Provider,{value:{claims:e,actualizar:e=>{t(e)}}},o.createElement(X,null),o.createElement("div",{className:"container"},o.createElement(U,null,Re.map((t=>o.createElement(j,{key:t.path,path:t.path,exact:t.exact},!t.esAdmin||e.findIndex((e=>"role"===e.nombre&&"admin"===e.valor))>-1?o.createElement(t.componente,null):o.createElement(o.Fragment,null,"Usted no tiene permiso para visualizar el componente.")))))))))}z(f,"primeraLetraMayuscula",(function(){return this.test("primera-letra-mayuscula","La primera letra debe ser mayúscula",(function(e){if(e&&e.length>0){const t=e.substring(0,1);return t===t.toUpperCase()}return!0}))})),c.interceptors.request.use((function(e){const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`bearer ${t}`),e}),(function(e){return Promise.reject(e)}));q.add(M),O.render(o.createElement(o.StrictMode,null,o.createElement(Ue,null)),document.getElementById("root"));
